<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
  </head>
  <body>
    <button id="login">login</button>
    <script type="module">
      import {
        createAuthRequest,
        postRequest,
        requestQR,
        queryQRResult,
      } from "../../dist/ontlogin.es.js";

      function showQr(text) {
        console.log("show qr code of", text);
      }

      async function login() {
        const authRequest = createAuthRequest(0);
        const authChallenge = await postRequest(
          "server-url/challenge",
          authRequest
        );
        const { text, id } = await requestQR(authChallenge);
        showQr(text);
        const challengeResponse = await queryQRResult(id);
        const result = await postRequest(
          "server-url/response",
          challengeResponse
        );
        console.log(result);
      }

      const button = document.querySelector("#login");
      if (button) {
        button.addEventListener("click", login);
      }
    </script>
  </body>
</html>
