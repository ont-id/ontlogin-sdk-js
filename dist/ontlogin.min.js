/**
   * @license
   * author: yuanzeyu@onchain.com
   * ontlogin.js v0.0.1
   * Released under the ISC license.
   */
var ontlogin=function(e){"use strict";var t,r,o;e.Version=void 0,(e.Version||(e.Version={})).Version1="1.0",e.MessageType=void 0,(t=e.MessageType||(e.MessageType={})).ClientHello="ClientHello",t.ServerHello="ServerHello",t.ClientResponse="ClientResponse",e.Action=void 0,(e.Action||(e.Action={})).Authorization="authorization",e.Error=void 0,function(e){e.VersionNotSupport="ERR_WRONG_VERSION",e.TypeNotSupport="ERR_TYPE_NOT_SUPPORTED",e.ActionNotSupport="ERR_ACTION_NOT_SUPPORTED",e.UnknownError="ERR_UNDEFINED"}(e.Error||(e.Error={})),e.QrStatus=void 0,(r=e.QrStatus||(e.QrStatus={}))[r.Pending=0]="Pending",r[r.Success=1]="Success",r[r.Fail=2]="Fail",e.RequestUrl=void 0,(o=e.RequestUrl||(e.RequestUrl={})).getQr="http://172.168.3.240:31843/qr-code/challenge",o.getQrResult="http://172.168.3.240:31843/qr-code/result";const s=async(e,t)=>fetch(e,{method:"post",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((e=>e.json())),n=async(e,t)=>fetch(`${e}/${t}`).then((e=>e.json())),i=e=>new Promise((t=>{setTimeout((()=>{t()}),e)})),u=async(t,r=1e3)=>{const{result:o,error:s,desc:a}=await n(e.RequestUrl.getQrResult,t);if(s)throw new Error(a);if(o.state===e.QrStatus.Pending)return await i(r),u(t);if(o.state===e.QrStatus.Success)return JSON.parse(o.clientResponse);throw new Error(o.error)};return e.createAuthRequest=(t=[])=>({ver:e.Version.Version1,type:e.MessageType.ClientHello,action:t.includes(e.Action.Authorization)?"1":"0"}),e.getRequest=n,e.postRequest=s,e.queryQRResult=u,e.requestQR=async t=>{const{result:r,error:o,desc:n}=await s(e.RequestUrl.getQr,t);if(o)throw new Error(n);return{id:r.id,text:r.qrCode}},e.wait=i,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
